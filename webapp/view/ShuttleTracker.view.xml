<mvc:View
    controllerName="esdm.realtime.tracking.controller.ShuttleTracker"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:l="sap.ui.layout">

    <Page
        title="{i18n>appTitle}"
        backgroundDesign="Solid"
        class="sapUiContentPadding">
        
        <headerContent>
            <Avatar src="sap-icon://customer" displaySize="XS" press="onProfilePress" />
        </headerContent>

        <content>
            <VBox class="sapUiSmallMargin">
                <Title text="{i18n>busName}" level="H2" class="sapUiSmallMarginBottom"/>
                <Text text="{i18n>selectStop}" class="sapUiSmallMarginBottom secondaryText"/>

                <!-- Bus Info Cards -->
                <HBox alignItems="Center" justifyContent="SpaceBetween" class="sapUiSmallMarginBottom">
                    <VBox class="infoCard">
                        <Label text="DRIVER" design="Bold" class="infoLabel"/>
                        <Text text="{/driverName}" class="infoValue"/>
                    </VBox>
                    <VBox class="infoCard">
                         <Label text="PLAT NO" design="Bold" class="infoLabel"/>
                         <Text text="{/plateNumber}" class="infoValue"/>
                    </VBox>
                </HBox>

                <!-- Timeline Container -->
                <VBox class="timelineContainer">
                    <!-- The vertical line -->
                    <VBox class="timelineLine" />
                    
                    <!-- The moving bus icon -->
                    <!-- We bind the 'top' property in controller to move it -->
                    <VBox id="busIcon" class="shuttleIconWrapper" alignItems="Center" justifyContent="Center">
                         <core:Icon src="sap-icon://public-transport" class="shuttleIcon" />
                    </VBox>

                    <VBox items="{/stops}">
                        <HBox class="stopItem" alignItems="Center">
                            <!-- Stop Circle -->
                            <VBox class="stopMarker" />
                            
                            <!-- Stop Name -->
                            <VBox class="stopContent sapUiSmallMarginBegin" width="100%">
                                <Text text="{name}" class="stopName {= ${selected} ? 'selectedStopName' : '' }" />
                            </VBox>
                            
                            <!-- Selected Label -->
                            <Label text="SELECTED" visible="{selected}" class="selectedLabel" />
                        </HBox>
                    </VBox>
                </VBox>

            </VBox>
        </content>
    </Page>
</mvc:View>
